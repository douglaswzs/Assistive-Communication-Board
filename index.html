<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <title>Assistive Communication Board</title>
  <style>
    :root {
      --bg: #f4f7fb;
      --card: #ffffff;
      --primary: #2563eb;
      --accent: #16a34a;
      --danger: #dc2626;
      --text: #111827;
    }

    * {
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    }

    body {
      margin: 0;
      background: var(--bg);
      color: var(--text);
    }

    body.high-contrast {
      background: #000;
      color: #fff;
    }

    header {
      padding: 14px;
      text-align: center;
      font-size: 1.4rem;
      font-weight: 700;
      background: white;
      border-bottom: 1px solid #e5e7eb;
    }

    body.high-contrast header {
      background: #000;
      color: #fff;
      border-bottom: 2px solid #fff;
    }

    nav {
      display: flex;
      justify-content: space-around;
      background: white;
      border-bottom: 1px solid #e5e7eb;
    }

    nav button {
      flex: 1;
      padding: 14px 6px;
      font-size: 1rem;
      border: none;
      background: none;
      font-weight: 600;
    }

    nav button.active {
      color: var(--primary);
      border-bottom: 4px solid var(--primary);
    }

    body.high-contrast nav button.active {
      color: var(--primary);
    }

    .page {
      display: none;
    }

    .page.active {
      display: block;
    }

    .board {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
      padding: 16px;
    }

    .card {
      background: var(--card);
      border-radius: 20px;
      padding: 20px 10px;
      text-align: center;
      font-size: 1.2rem;
      font-weight: 600;
      box-shadow: 0 6px 16px rgba(0,0,0,0.08);
      cursor: pointer;
      user-select: none;
      transition: transform 0.1s ease, box-shadow 0.1s ease;
    }

    .card:active {
      transform: scale(0.96);
      box-shadow: 0 3px 8px rgba(0,0,0,0.15);
    }

    .yes { background: #dcfce7; color: var(--accent); }
    .no { background: #fee2e2; color: var(--danger); }
    .need { background: #e0e7ff; }
    .feeling { background: #fff7ed; }
    .pain { background: #fde2e2; }
    .person { background: #ecfeff; }

    body.high-contrast .card {
      background: #000;
      color: #fff;
      border: 3px solid #fff;
      box-shadow: none;
    }

    footer {
      position: fixed;
      bottom: 0;
      width: 100%;
      background: white;
      border-top: 1px solid #e5e7eb;
      padding: 12px;
      text-align: center;
    }

    #output {
      font-size: 1.3rem;
      font-weight: 700;
      color: var(--primary);
    }

    footer button {
      margin-top: 8px;
      padding: 10px 18px;
      font-size: 1rem;
      border-radius: 14px;
      border: none;
      background: var(--primary);
      color: white;
    }

    .setting {
      font-size: 1.1rem;
      padding: 12px 16px;
    }
  </style>
</head>
<body>

<header>üí¨ Assistive Communication Board</header>
<nav>
  <button onclick="showPage('settings', this)">‚öôÔ∏è Admin</button>
</nav>
<nav id="navSectionButtons">
  <button onclick="showPage('settings', this)">‚öôÔ∏è Admin</button>
</nav>

<!-- NEEDS -->
<section id="needs" class="page active">
  <div class="board">
  </div>
</section>

<!-- FEELINGS -->
<section id="feelings" class="page">
  <div class="board">
  </div>
</section>

<!-- PAIN -->
<section id="pain" class="page">
  <div class="board">
  </div>
</section>

<!-- PEOPLE -->
<!-- ACTIVITIES -->
<section id="activities" class="page">
  <div class="board"></div>
</section>
<section id="people" class="page">
  <div class="board">
  </div>
</section>

<!-- ADMIN SETTINGS -->
<section id="settings" class="page">
  <div class="setting">
    <label><input type="checkbox" onchange="toggleHighContrast(this.checked)"> High contrast mode</label>
  </div>
  <div class="setting">
    <label><input type="checkbox" onchange="toggleShowAll(this.checked)"> Show all buttons on one page</label>
  </div>
  <div class="setting">
    <label for="menuLangSelect">Menu Language:</label>
    <select id="menuLangSelect">
      <option value="en" selected>English</option>
      <option value="zh-CN">Mandarin Chinese</option>
      <option value="zh-HK">Cantonese Chinese</option>
    </select>
  </div>
  <div class="setting">
    <label for="voiceLangSelect">Voice Language:</label>
    <select id="voiceLangSelect">
      <option value="en" selected>English</option>
      <option value="zh-CN">Mandarin Chinese</option>
      <option value="zh-HK">Cantonese Chinese</option>
    </select>
  </div>
</section>

<footer>
  <div id="output">Tap a card</div>
  <button onclick="clearOutput()">Clear</button>
</footer>

<script>
  let isEditMode = false;
  let showAll = false;
  let menuLang = 'en';
  let voiceLang = 'en';

  // Multi-language map
  const langMap = {
  "en": {
    sectionNames: {
      needs: 'Needs',
      feelings: 'Feelings',
      pain: 'Pain',
      people: 'People',
      activities: 'Daily Routine'
    },
    "needs": [
      {"phraseid": "yes", "emoji": "‚úÖ", "label": "Yes", "speak": "Yes"},
      {"phraseid": "no", "emoji": "‚ùå", "label": "No", "speak": "No"},
      {"phraseid": "stop", "emoji": "üõë", "label": "Stop", "speak": "Stop"},
      {"phraseid": "wait", "emoji": "‚è≥", "label": "Wait", "speak": "Please wait"},
      {"phraseid": "please", "emoji": "üôè", "label": "Please", "speak": "Please"},
      {"phraseid": "drink", "emoji": "üíß", "label": "Drink", "speak": "I need water"},
      {"phraseid": "food", "emoji": "üçΩÔ∏è", "label": "Food", "speak": "I need food"},
      {"phraseid": "toilet", "emoji": "üöΩ", "label": "Toilet", "speak": "I need the toilet"},
      {"phraseid": "rest", "emoji": "üõèÔ∏è", "label": "Rest", "speak": "I need rest"},
      {"phraseid": "cold", "emoji": "üß•", "label": "Cold", "speak": "I am cold"},
      {"phraseid": "hot", "emoji": "‚òÄÔ∏è", "label": "Hot", "speak": "I am hot"},
      {"phraseid": "situp", "emoji": "üßç", "label": "Sit up", "speak": "I want to sit up"},
      {"phraseid": "liedown", "emoji": "üõå", "label": "Lie down", "speak": "I want to lie down"},
      {"phraseid": "medication", "emoji": "üíä", "label": "Medication", "speak": "I need medication"},
      {"phraseid": "brushteeth", "emoji": "ü™•", "label": "Brush teeth", "speak": "I want to brush my teeth"},
      {"phraseid": "washhands", "emoji": "üßº", "label": "Wash hands", "speak": "I want to wash my hands"},
      {"phraseid": "lotion", "emoji": "üß¥", "label": "Lotion / Skin care", "speak": "I want lotion or skin care"}
    ],
    "feelings": [
      {"phraseid": "ok", "emoji": "üôÇ", "label": "OK", "speak": "I feel OK"},
      {"phraseid": "tired", "emoji": "üò¥", "label": "Tired", "speak": "I feel tired"},
      {"phraseid": "sad", "emoji": "üòû", "label": "Sad", "speak": "I feel sad"},
      {"phraseid": "anxious", "emoji": "üòü", "label": "Anxious", "speak": "I feel anxious"},
      {"phraseid": "frustrated", "emoji": "üò†", "label": "Frustrated", "speak": "I feel frustrated"},
      {"phraseid": "comfort", "emoji": "ü´Ç", "label": "Comfort", "speak": "I need comfort"}
    ],
    "pain": [
      {"phraseid": "pain", "emoji": "üò£", "label": "Pain", "speak": "I am in pain"},
      {"phraseid": "head", "emoji": "üß†", "label": "Head", "speak": "My head hurts"},
      {"phraseid": "chest", "emoji": "‚ù§Ô∏è", "label": "Chest", "speak": "My chest hurts"},
      {"phraseid": "arm", "emoji": "üí™", "label": "Arm", "speak": "My arm hurts"},
      {"phraseid": "leg", "emoji": "ü¶µ", "label": "Leg", "speak": "My leg hurts"},
      {"phraseid": "stomach", "emoji": "ü§¢", "label": "Stomach", "speak": "My stomach hurts"},
      {"phraseid": "pain0", "emoji": "üî¢", "label": "Pain: 0", "speak": "My pain is 0"},
      {"phraseid": "pain1", "emoji": "üî¢", "label": "Pain: 1", "speak": "My pain is 1"},
      {"phraseid": "pain2", "emoji": "üî¢", "label": "Pain: 2", "speak": "My pain is 2"},
      {"phraseid": "pain3", "emoji": "üî¢", "label": "Pain: 3", "speak": "My pain is 3"},
      {"phraseid": "pain4", "emoji": "üî¢", "label": "Pain: 4", "speak": "My pain is 4"},
      {"phraseid": "pain5", "emoji": "üî¢", "label": "Pain: 5", "speak": "My pain is 5"},
      {"phraseid": "pain6", "emoji": "üî¢", "label": "Pain: 6", "speak": "My pain is 6"},
      {"phraseid": "pain7", "emoji": "üî¢", "label": "Pain: 7", "speak": "My pain is 7"},
      {"phraseid": "pain8", "emoji": "üî¢", "label": "Pain: 8", "speak": "My pain is 8"},
      {"phraseid": "pain9", "emoji": "üî¢", "label": "Pain: 9", "speak": "My pain is 9"},
      {"phraseid": "pain10", "emoji": "üî¢", "label": "Pain: 10", "speak": "My pain is 10"}
    ],
    "people": [
      {"phraseid": "you", "emoji": "üëâ", "label": "You", "speak": "I want you"},
      {"phraseid": "family", "emoji": "üë®‚Äçüë©‚Äçüëß‚Äçüë¶", "label": "Family", "speak": "I want my family"},
      {"phraseid": "nurse", "emoji": "üë©‚Äç‚öïÔ∏è", "label": "Nurse", "speak": "I want a nurse"},
      {"phraseid": "doctor", "emoji": "üë®‚Äç‚öïÔ∏è", "label": "Doctor", "speak": "I want a doctor"},
      {"phraseid": "friend", "emoji": "üßë‚Äçü§ù‚Äçüßë", "label": "Friend", "speak": "I want my friend"}
    ],
    "activities": [
      {"phraseid": "sleep", "emoji": "üõèÔ∏è", "label": "Sleep", "speak": "I want to sleep"},
      {"phraseid": "eat", "emoji": "üçΩÔ∏è", "label": "Eat", "speak": "I want to eat"},
      {"phraseid": "walk", "emoji": "üö∂", "label": "Walk / Exercise", "speak": "I want to walk or exercise"},
      {"phraseid": "tv", "emoji": "üì∫", "label": "Watch TV / Entertainment", "speak": "I want to watch TV"},
      {"phraseid": "read", "emoji": "üìñ", "label": "Read", "speak": "I want to read"}
    ]
  },
  "zh-CN": {
    sectionNames: {
      needs: 'ÈúÄÊ±Ç',
      feelings: 'ÊÑüÂèó',
      pain: 'ÁñºÁóõ',
      people: '‰∫∫Áâ©',
      activities: 'Êó•Â∏∏'
    },
    "needs": [
      {"phraseid": "yes", "emoji": "‚úÖ", "label": "ÊòØ", "speak": "ÊòØ"},
      {"phraseid": "no", "emoji": "‚ùå", "label": "Âê¶", "speak": "Âê¶"},
      {"phraseid": "stop", "emoji": "üõë", "label": "ÂÅúÊ≠¢", "speak": "ÂÅúÊ≠¢"},
      {"phraseid": "wait", "emoji": "‚è≥", "label": "Á≠âÂæÖ", "speak": "ËØ∑Á≠âÂæÖ"},
      {"phraseid": "please", "emoji": "üôè", "label": "ËØ∑", "speak": "ËØ∑"},
      {"phraseid": "drink", "emoji": "üíß", "label": "ÂñùÊ∞¥", "speak": "ÊàëË¶ÅÂñùÊ∞¥"},
      {"phraseid": "food", "emoji": "üçΩÔ∏è", "label": "ÂêÉÈ•≠", "speak": "ÊàëË¶ÅÂêÉÈ•≠"},
      {"phraseid": "toilet", "emoji": "üöΩ", "label": "ÂéïÊâÄ", "speak": "ÊàëË¶ÅÂéªÂªÅÊâÄ"},
      {"phraseid": "rest", "emoji": "üõèÔ∏è", "label": "‰ºëÊÅØ", "speak": "ÊàëË¶Å‰ºëÊÅØ"},
      {"phraseid": "cold", "emoji": "üß•", "label": "ÂÜ∑", "speak": "ÊàëËßâÂæóÂÜ∑"},
      {"phraseid": "hot", "emoji": "‚òÄÔ∏è", "label": "ÁÉ≠", "speak": "ÊàëËßâÂæóÁÉ≠"},
      {"phraseid": "situp", "emoji": "üßç", "label": "ÂùêËµ∑Ë∫´", "speak": "ÊàëË¶ÅÂùêËµ∑Ë∫´"},
      {"phraseid": "liedown", "emoji": "üõå", "label": "Ë∫∫‰Ωé", "speak": "ÊàëË¶ÅË∫∫‰Ωé"},
      {"phraseid": "medication", "emoji": "üíä", "label": "ËçØÁâ©", "speak": "ÊàëË¶ÅÂêÉËçØ"},
      {"phraseid": "brushteeth", "emoji": "ü™•", "label": "Âà∑Áâô", "speak": "ÊàëË¶ÅÂà∑Áâô"},
      {"phraseid": "washhands", "emoji": "üßº", "label": "Ê¥óÊâã", "speak": "ÊàëË¶ÅÊ¥óÊâã"},
      {"phraseid": "lotion", "emoji": "üß¥", "label": "Êä§ËÇ§", "speak": "ÊàëË¶ÅÊä§ËÇ§"}
    ],
    "feelings": [
      {"phraseid": "ok", "emoji": "üôÇ", "label": "Â•Ω", "speak": "ÊàëÊÑüËßâÂæàÂ•Ω"},
      {"phraseid": "tired", "emoji": "üò¥", "label": "Á¥Ø", "speak": "ÊàëÊÑüËßâÂæàÁ¥Ø"},
      {"phraseid": "sad", "emoji": "üòû", "label": "ÈöæËøá", "speak": "ÊàëÊÑüËßâÈöæËøá"},
      {"phraseid": "anxious", "emoji": "üòü", "label": "ÁÑ¶Ëôë", "speak": "ÊàëÊÑüËßâÁÑ¶Ëôë"},
      {"phraseid": "frustrated", "emoji": "üò†", "label": "Ê≤Æ‰∏ß", "speak": "ÊàëÊÑüËßâÊ≤Æ‰∏ß"},
      {"phraseid": "comfort", "emoji": "ü´Ç", "label": "ÂÆâÊÖ∞", "speak": "ÊàëÈúÄË¶ÅÂÆâÊÖ∞"}
    ],
    "pain": [
      {"phraseid": "pain", "emoji": "üò£", "label": "ÁñºÁóõ", "speak": "ÊàëÂæàÁñº"},
      {"phraseid": "head", "emoji": "üß†", "label": "Â§¥", "speak": "ÊàëÁöÑÂ§¥ÂæàÁñº"},
      {"phraseid": "chest", "emoji": "‚ù§Ô∏è", "label": "ËÉ∏", "speak": "ÊàëÁöÑËÉ∏ÂæàÁñº"},
      {"phraseid": "arm", "emoji": "üí™", "label": "ÊâãËáÇ", "speak": "ÊàëÁöÑÊâãËáÇÂæàÁñº"},
      {"phraseid": "leg", "emoji": "ü¶µ", "label": "ËÖø", "speak": "ÊàëÁöÑËÖøÂæàÁñº"},
      {"phraseid": "stomach", "emoji": "ü§¢", "label": "ËÇöÂ≠ê", "speak": "ÊàëÁöÑËÇöÂ≠êÂæàÁñº"},
      {"phraseid": "pain0", "emoji": "üî¢", "label": "ÁñºÁóõ: 0", "speak": "ÊàëÁöÑÁñºÁóõÊòØ0"},
      {"phraseid": "pain1", "emoji": "üî¢", "label": "ÁñºÁóõ: 1", "speak": "ÊàëÁöÑÁñºÁóõÊòØ1"},
      {"phraseid": "pain2", "emoji": "üî¢", "label": "ÁñºÁóõ: 2", "speak": "ÊàëÁöÑÁñºÁóõÊòØ2"},
      {"phraseid": "pain3", "emoji": "üî¢", "label": "ÁñºÁóõ: 3", "speak": "ÊàëÁöÑÁñºÁóõÊòØ3"},
      {"phraseid": "pain4", "emoji": "üî¢", "label": "ÁñºÁóõ: 4", "speak": "ÊàëÁöÑÁñºÁóõÊòØ4"},
      {"phraseid": "pain5", "emoji": "üî¢", "label": "ÁñºÁóõ: 5", "speak": "ÊàëÁöÑÁñºÁóõÊòØ5"},
      {"phraseid": "pain6", "emoji": "üî¢", "label": "ÁñºÁóõ: 6", "speak": "ÊàëÁöÑÁñºÁóõÊòØ6"},
      {"phraseid": "pain7", "emoji": "üî¢", "label": "ÁñºÁóõ: 7", "speak": "ÊàëÁöÑÁñºÁóõÊòØ7"},
      {"phraseid": "pain8", "emoji": "üî¢", "label": "ÁñºÁóõ: 8", "speak": "ÊàëÁöÑÁñºÁóõÊòØ8"},
      {"phraseid": "pain9", "emoji": "üî¢", "label": "ÁñºÁóõ: 9", "speak": "ÊàëÁöÑÁñºÁóõÊòØ9"},
      {"phraseid": "pain10", "emoji": "üî¢", "label": "ÁñºÁóõ: 10", "speak": "ÊàëÁöÑÁñºÁóõÊòØ10"}
    ],
    "people": [
      {"phraseid": "you", "emoji": "üëâ", "label": "‰Ω†", "speak": "ÊàëË¶Å‰Ω†"},
      {"phraseid": "family", "emoji": "üë®‚Äçüë©‚Äçüëß‚Äçüë¶", "label": "ÂÆ∂‰∫∫", "speak": "ÊàëË¶ÅÂÆ∂‰∫∫"},
      {"phraseid": "nurse", "emoji": "üë©‚Äç‚öïÔ∏è", "label": "Êä§Â£´", "speak": "ÊàëË¶ÅÊä§Â£´"},
      {"phraseid": "doctor", "emoji": "üë®‚Äç‚öïÔ∏è", "label": "ÂåªÁîü", "speak": "ÊàëË¶ÅÂåªÁîü"},
      {"phraseid": "friend", "emoji": "üßë‚Äçü§ù‚Äçüßë", "label": "ÊúãÂèã", "speak": "ÊàëË¶ÅÊúãÂèã"}
    ],
    "activities": [
      {"phraseid": "sleep", "emoji": "üõèÔ∏è", "label": "Áù°Ëßâ", "speak": "ÊàëË¶ÅÁù°Ëßâ"},
      {"phraseid": "eat", "emoji": "üçΩÔ∏è", "label": "ÂêÉÈ•≠", "speak": "ÊàëË¶ÅÂêÉÈ•≠"},
      {"phraseid": "walk", "emoji": "üö∂", "label": "Êï£Ê≠• / ËøêÂä®", "speak": "ÊàëË¶ÅÊï£Ê≠•ÊàñËøêÂä®"},
      {"phraseid": "tv", "emoji": "üì∫", "label": "ÁúãÁîµËßÜ", "speak": "ÊàëË¶ÅÁúãÁîµËßÜ"},
      {"phraseid": "read", "emoji": "üìñ", "label": "ÈòÖËØª", "speak": "ÊàëË¶ÅÈòÖËØª"}
    ]
  },
  "zh-HK": {
     sectionNames: {
      needs: 'ÈúÄË¶Å',
      feelings: 'ÊÑüË¶∫',
      pain: 'ÁóõÊ•ö',
      people: '‰∫∫Áâ©',
      activities: 'Êó•Â∏∏'
    },
    "needs": [
      {"phraseid": "yes", "emoji": "‚úÖ", "label": "‰øÇ", "speak": "‰øÇ"},
      {"phraseid": "no", "emoji": "‚ùå", "label": "Âîî‰øÇ", "speak": "Âîî‰øÇ"},
      {"phraseid": "stop", "emoji": "üõë", "label": "ÂÅú", "speak": "ÂÅú"},
      {"phraseid": "wait", "emoji": "‚è≥", "label": "Á≠â", "speak": "Ë´ãÁ≠â"},
      {"phraseid": "please", "emoji": "üôè", "label": "Ë´ã", "speak": "Ë´ã"},
      {"phraseid": "drink", "emoji": "üíß", "label": "È£≤Ê∞¥", "speak": "ÊàëË¶ÅÈ£≤Ê∞¥"},
      {"phraseid": "food", "emoji": "üçΩÔ∏è", "label": "È£üÈ£Ø", "speak": "ÊàëË¶ÅÈ£üÈ£Ø"},
      {"phraseid": "toilet", "emoji": "üöΩ", "label": "ÂªÅÊâÄ", "speak": "ÊàëË¶ÅÂéªÂªÅÊâÄ"},
      {"phraseid": "rest", "emoji": "üõèÔ∏è", "label": "‰ºëÊÅØ", "speak": "ÊàëË¶Å‰ºëÊÅØ"},
      {"phraseid": "cold", "emoji": "üß•", "label": "Âáç", "speak": "ÊàëË¶∫ÂæóÂáç"},
      {"phraseid": "hot", "emoji": "‚òÄÔ∏è", "label": "ÁÜ±", "speak": "ÊàëË¶∫ÂæóÁÜ±"},
      {"phraseid": "situp", "emoji": "üßç", "label": "ÂùêËµ∑Ë∫´", "speak": "ÊàëË¶ÅÂùêËµ∑Ë∫´"},
      {"phraseid": "liedown", "emoji": "üõå", "label": "Ë∫∫‰Ωé", "speak": "ÊàëË¶ÅË∫∫‰Ωé"},
      {"phraseid": "medication", "emoji": "üíä", "label": "Ëó•Áâ©", "speak": "ÊàëË¶ÅÈ£üËó•"},
      {"phraseid": "brushteeth", "emoji": "ü™•", "label": "Âà∑Áâô", "speak": "ÊàëË¶ÅÂà∑Áâô"},
      {"phraseid": "washhands", "emoji": "üßº", "label": "Ê¥óÊâã", "speak": "ÊàëË¶ÅÊ¥óÊâã"},
      {"phraseid": "lotion", "emoji": "üß¥", "label": "Ë≠∑ËÜö", "speak": "ÊàëË¶ÅË≠∑ËÜö"}
    ],
    "feelings": [
      {"phraseid": "ok", "emoji": "üôÇ", "label": "Â•Ω", "speak": "ÊàëË¶∫ÂæóÂ•Ω"},
      {"phraseid": "tired", "emoji": "üò¥", "label": "Êî∞", "speak": "ÊàëË¶∫ÂæóÊî∞"},
      {"phraseid": "sad", "emoji": "üòû", "label": "ÂÇ∑ÂøÉ", "speak": "ÊàëË¶∫ÂæóÂÇ∑ÂøÉ"},
      {"phraseid": "anxious", "emoji": "üòü", "label": "ÊìîÂøÉ", "speak": "ÊàëË¶∫ÂæóÊìîÂøÉ"},
      {"phraseid": "frustrated", "emoji": "üò†", "label": "Ê≤ÆÂñ™", "speak": "ÊàëË¶∫ÂæóÊ≤ÆÂñ™"},
      {"phraseid": "comfort", "emoji": "ü´Ç", "label": "ÂÆâÊÖ∞", "speak": "ÊàëÈúÄË¶ÅÂÆâÊÖ∞"}
    ],
    "pain": [
      {"phraseid": "pain", "emoji": "üò£", "label": "Áóõ", "speak": "ÊàëÂ•ΩÁóõ"},
      {"phraseid": "head", "emoji": "üß†", "label": "È†≠", "speak": "ÊàëÂÄãÈ†≠Â•ΩÁóõ"},
      {"phraseid": "chest", "emoji": "‚ù§Ô∏è", "label": "ËÉ∏", "speak": "ÊàëÂÄãËÉ∏Â•ΩÁóõ"},
      {"phraseid": "arm", "emoji": "üí™", "label": "ÊâãËáÇ", "speak": "ÊàëÈöªÊâãËáÇÂ•ΩÁóõ"},
      {"phraseid": "leg", "emoji": "ü¶µ", "label": "ËÖ≥", "speak": "ÊàëÈöªËÖ≥Â•ΩÁóõ"},
      {"phraseid": "stomach", "emoji": "ü§¢", "label": "ËÇö", "speak": "ÊàëÂÄãËÇöÂ•ΩÁóõ"},
      {"phraseid": "pain0", "emoji": "üî¢", "label": "ÁóõÊ•ö: 0", "speak": "ÊàëÂòÖÁóõÊ•ö‰øÇ0"},
      {"phraseid": "pain1", "emoji": "üî¢", "label": "ÁóõÊ•ö: 1", "speak": "ÊàëÂòÖÁóõÊ•ö‰øÇ1"},
      {"phraseid": "pain2", "emoji": "üî¢", "label": "ÁóõÊ•ö: 2", "speak": "ÊàëÂòÖÁóõÊ•ö‰øÇ2"},
      {"phraseid": "pain3", "emoji": "üî¢", "label": "ÁóõÊ•ö: 3", "speak": "ÊàëÂòÖÁóõÊ•ö‰øÇ3"},
      {"phraseid": "pain4", "emoji": "üî¢", "label": "ÁóõÊ•ö: 4", "speak": "ÊàëÂòÖÁóõÊ•ö‰øÇ4"},
      {"phraseid": "pain5", "emoji": "üî¢", "label": "ÁóõÊ•ö: 5", "speak": "ÊàëÂòÖÁóõÊ•ö‰øÇ5"},
      {"phraseid": "pain6", "emoji": "üî¢", "label": "ÁóõÊ•ö: 6", "speak": "ÊàëÂòÖÁóõÊ•ö‰øÇ6"},
      {"phraseid": "pain7", "emoji": "üî¢", "label": "ÁóõÊ•ö: 7", "speak": "ÊàëÂòÖÁóõÊ•ö‰øÇ7"},
      {"phraseid": "pain8", "emoji": "üî¢", "label": "ÁóõÊ•ö: 8", "speak": "ÊàëÂòÖÁóõÊ•ö‰øÇ8"},
      {"phraseid": "pain9", "emoji": "üî¢", "label": "ÁóõÊ•ö: 9", "speak": "ÊàëÂòÖÁóõÊ•ö‰øÇ9"},
      {"phraseid": "pain10", "emoji": "üî¢", "label": "ÁóõÊ•ö: 10", "speak": "ÊàëÂòÖÁóõÊ•ö‰øÇ10"}
    ],
    "people": [
      {"phraseid": "you", "emoji": "üëâ", "label": "‰Ω†", "speak": "ÊàëË¶Å‰Ω†"},
      {"phraseid": "family", "emoji": "üë®‚Äçüë©‚Äçüëß‚Äçüë¶", "label": "ÂÆ∂‰∫∫", "speak": "ÊàëË¶ÅÂÆ∂‰∫∫"},
      {"phraseid": "nurse", "emoji": "üë©‚Äç‚öïÔ∏è", "label": "Ë≠∑Â£´", "speak": "ÊàëË¶ÅË≠∑Â£´"},
      {"phraseid": "doctor", "emoji": "üë®‚Äç‚öïÔ∏è", "label": "ÈÜ´Áîü", "speak": "ÊàëË¶ÅÈÜ´Áîü"},
      {"phraseid": "friend", "emoji": "üßë‚Äçü§ù‚Äçüßë", "label": "ÊúãÂèã", "speak": "ÊàëË¶ÅÊúãÂèã"}
    ],
    "activities": [
      {"phraseid": "sleep", "emoji": "üõèÔ∏è", "label": "ÁûìË¶∫", "speak": "ÊàëË¶ÅÁûìË¶∫"},
      {"phraseid": "eat", "emoji": "üçΩÔ∏è", "label": "È£üÈ£Ø", "speak": "ÊàëË¶ÅÈ£üÈ£Ø"},
      {"phraseid": "walk", "emoji": "üö∂", "label": "Êï£Ê≠• / ÈÅãÂãï", "speak": "ÊàëË¶ÅÊï£Ê≠•ÊàñÈÅãÂãï"},
      {"phraseid": "tv", "emoji": "üì∫", "label": "ÁùáÈõªË¶ñ", "speak": "ÊàëË¶ÅÁùáÈõªË¶ñ"},
      {"phraseid": "read", "emoji": "üìñ", "label": "Èñ±ËÆÄ", "speak": "ÊàëË¶ÅÈñ±ËÆÄ"}
    ]
  }
};

  function renderBoard() {
    renderNavSectionButtons();
    ['needs', 'feelings', 'pain', 'people', 'activities'].forEach(section => {
      const board = document.querySelector(`#${section} .board`);
      board.innerHTML = '';
      langMap[menuLang][section].forEach((item, idx) => {
        const card = document.createElement('div');
        let cardClass = `card ${section === 'needs' && (idx === 0 ? 'yes' : idx === 1 ? 'no' : 'need') || section}`;
        if (section === 'pain' && item.emoji === 'üî¢') {
          const percent = parseInt(item.label.replace(/\D/g, '')) / 10;
          const color = painScaleColor(percent);
          card.style.background = color;
          card.style.color = '#000';
        }
        card.className = cardClass;
        card.innerHTML = `<span class="emoji">${item.emoji}</span>${item.label}`;
        card.setAttribute('data-phraseid', item.phraseid);
        card.setAttribute('onclick', `select('${item.speak}', this, '${item.phraseid}', '${section}')`);
        board.appendChild(card);
      });
    });

    function painScaleColor(percent) {
      const r = percent < 0.5 ? Math.round(255 * (percent * 2)) : 255;
      const g = percent < 0.5 ? 255 : Math.round(255 * (1 - (percent - 0.5) * 2));
      return `rgb(${r},${g},64)`;
    }
  }

  function select(text, el, phraseid, section) {
    document.getElementById('output').textContent = text;
    // Lookup phrase in voiceLang
    let phrase = langMap[voiceLang][section].find(item => item.phraseid === phraseid);
    let speakText = phrase ? phrase.speak : text;
    if ('speechSynthesis' in window) {
      const utterance = new SpeechSynthesisUtterance(speakText);
      utterance.rate = 0.9;
      utterance.lang = voiceLang;
      speechSynthesis.cancel();
      speechSynthesis.speak(utterance);
    }
  }

  function showPage(id, btn) {
    if (showAll && id !== 'settings') return;
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
    if (btn) btn.classList.add('active');
  }

  function toggleHighContrast(on) {
    document.body.classList.toggle('high-contrast', on);
  }

  function toggleShowAll(on) {
    showAll = on;
    document.querySelectorAll('.page').forEach(p => {
      if (p.id !== 'settings') p.classList.toggle('active', on);
    });
  }

  function clearOutput() {
    document.getElementById('output').textContent = 'Tap a card';
    if ('speechSynthesis' in window) speechSynthesis.cancel();
  }

  function renderNavSectionButtons() {
    const navDiv = document.getElementById('navSectionButtons');
    navDiv.innerHTML = '';
    const sections = ['needs', 'feelings', 'pain', 'people', 'activities'];
    const sectionNames = langMap[menuLang].sectionNames;
    sections.forEach((section) => {
      const btn = document.createElement('button');
      btn.textContent = sectionNames[section] || section;
      btn.setAttribute('onclick', `showPage('${section}', this)`);
      if (document.getElementById(section).classList.contains('active')) {
        btn.className = 'active';
      }
      navDiv.appendChild(btn);
    });
  }

  // Setup language selectors after DOM loaded
  window.addEventListener('DOMContentLoaded', () => {
    const menuLangSelect = document.getElementById('menuLangSelect');
    const voiceLangSelect = document.getElementById('voiceLangSelect');
    menuLangSelect.value = menuLang;
    voiceLangSelect.value = voiceLang;
    menuLangSelect.onchange = e => {
      menuLang = e.target.value;
      renderBoard();
      clearOutput();
    };
    voiceLangSelect.onchange = e => {
      voiceLang = e.target.value;
    };
  });
  // Initial render
  renderBoard();

</script>

</body>
</html>
